{"version":3,"sources":["styles/Profile.module.css","styles/ProfilePage.module.css","App.module.css","assets/versus-logo.png","api/axiosDefaults.js","contexts/CurrentUserContext.js","components/Avatar.js","components/NavBar.js","assets/no-results.png","components/Asset.js","components/NotFound.js","hooks/useRedirect.js","pages/auth/SignUpForm.js","utils/utils.js","pages/auth/SignIn.js","components/ModalHandler.js","pages/posts/PostCreateForm.js","assets/upload.png","components/MoreDropdown.js","pages/posts/Post.js","pages/comments/CommentCreateForm.js","pages/comments/CommentEditForm.js","pages/comments/Comment.js","contexts/ProfileDataContext.js","pages/profiles/Profile.js","pages/profiles/PopularProfiles.js","pages/posts/PostPage.js","pages/posts/PostsPage.js","pages/posts/PostEditForm.js","pages/profiles/ProfilePage.js","pages/profiles/UsernameForm.js","pages/profiles/UserPasswordForm.js","pages/profiles/ProfileEditForm.js","App.js","reportWebVitals.js","index.js","styles/NavBar.module.css","styles/SignInUpForm.module.css","styles/Post.module.css","styles/CommentCreateEditForm.module.css","styles/PostCreateEditForm.module.css","styles/MoreDropdown.module.css","styles/Modal.module.css","styles/Comment.module.css","styles/PostsPage.module.css","styles/Button.module.css","styles/Avatar.module.css","styles/NotFound.module.css","styles/Asset.module.css"],"names":["module","exports","axios","defaults","baseURL","headers","post","withCredentials","xsrfCookieName","xsrfHeaderName","axiosRes","create","axiosReq","CurrentUserContext","createContext","SetCurrentUserContext","useCurrentUser","useContext","useSetCurrentUser","CurrentUserProvider","_ref","children","currentUser","setCurrentUser","useState","console","log","useEffect","async","data","get","err","response","handleMount","history","useHistory","useMemo","interceptors","request","use","prevCurrentUser","push","config","Promise","reject","_err$response","status","_jsx","Provider","value","Avatar","src","height","text","_jsxs","className","styles","width","alt","NavBar","show","setShow","handleClose","addPostIcon","NavLink","activeClassName","Active","to","loggedInIcons","_Fragment","onClick","event","preventDefault","concat","profile_id","profile_image","username","loggedOutIcons","Navbar","expand","fixed","Container","Brand","logo","Toggle","Collapse","id","Nav","exact","Modal","onHide","Header","closeButton","Title","Body","Footer","Button","variant","Asset","spinner","message","Spinner","animation","NotFound","NoResults","useRedirect","userAuthStatus","SignUpForm","_errors$username","_errors$password","_errors$password2","_errors$non_field_err","signUpData","setSignUpData","password1","password2","errors","setErrors","handleChange","target","name","Row","Col","md","appStyles","Content","Form","onSubmit","_err$response2","detail","Group","controlId","Label","Control","type","placeholder","Input","onChange","map","idx","Alert","btnStyles","Wide","Bright","non_field_errors","Link","SignUpCol","Image","FillerImage","fetchMoreData","resource","setResource","url","URL","next","correctUrl","split","origin","temp","slice","join","prevResource","results","reduce","acc","cur","some","accResult","followHelper","profile","clickedProfile","sender_id","is_owner","unfollowHelper","SignInForm","signInData","setSignInData","password","user","refreshTokenTimestamp","jwtDecode","refresh","exp","localStorage","setItem","setTokenTimestamp","goBack","SignInCol","ModalHandler","props","rules","close","title","ruleItems","Object","entries","key","modalStyles","RuleItem","RuleList","PostCreateForm","_errors$title","_errors$content","_errors$price","_errors$location","_errors$image","postData","setPostData","content","image","category","price","location","privacy","categories","setCategories","SetRules","showModal","SetShowModal","imageInput","useRef","checked","newValue","textFields","maxLength","as","rows","min","label","Black","Blue","formData","FormData","append","current","files","Check","lg","rounded","htmlFor","File","accept","revokeObjectURL","createObjectURL","ref","ThreeDots","React","forwardRef","e","MoreDropdown","_ref2","handleEdit","handleDelete","Dropdown","drop","Menu","popperConfig","strategy","Item","DropdownItem","ProfileEditDropdown","_ref3","Absolute","Post","owner","category_name","created_at","down_vote_id","up_vote_id","updated_at","postPage","down_votes_count","up_votes_count","comments_count","setPosts","Card","Media","delete","Img","Text","PostBar","OverlayTrigger","placement","overlay","Tooltip","Heart","product","up_vote","down_vote","prevPosts","HeartOutline","vote_id","Table","striped","bordered","hover","CommentCreateForm","setPost","setComments","profileImage","setContent","prevComments","prevPost","InputGroup","disabled","trim","CommentEditForm","setShowEditForm","formContent","setFormContent","put","comment","Comment","showEditForm","Owner","Date","filter","ProfileDataContext","SetProfileDataContext","useProfileData","useSetProfileData","ProfileDataProvider","profileData","setProfileData","pageProfile","popularProfiles","prevState","handleFollow","handleUnfollow","Profile","mobile","imageSize","total_upvotes","WordBreak","BlackOutline","PopularProfiles","length","PostPage","comments","useParams","all","InfiniteScroll","dataLength","loader","hasMore","PostsPage","topVote","posts","hasLoaded","setHasLoaded","pathname","useLocation","query","setQuery","timer","setTimeout","fetchPosts","clearTimeout","SearchIcon","SearchBar","PostEditForm","_imageInput$current","ProfilePage","profilePosts","setProfilePosts","fetchData","fetchDataRequest","mainProfile","noGutters","ProfileImage","roundedCircle","xs","posts_count","total_up_votes_received","total_down_votes_received","mainProfilePosts","UsernameForm","setUsername","_currentUser$profile_","toString","prevUser","UserPasswordForm","_errors$new_password","_errors$new_password2","userData","setUserData","new_password1","new_password2","ProfileEditForm","imageFile","_imageFile$current","_imageFile$current2","fluid","App","Main","Switch","Route","path","render","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","Router","document","getElementById"],"mappings":"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","file":"static/js/main.58b35901.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"WordBreak\":\"Profile_WordBreak__3_YmI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProfileImage\":\"ProfilePage_ProfileImage__7dvRw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16ZpL\",\"Main\":\"App_Main__HQkvd\",\"Content\":\"App_Content__ZaMNr\",\"FillerImage\":\"App_FillerImage__2ob-g\",\"Image\":\"App_Image__3UPXw\"};","export default __webpack_public_path__ + \"static/media/versus-logo.617c54dd.png\";","/*\nYour code is now set up so that you can follow along with what you learned in the Moments walkthrough. \nThere is one final difference between the Moments walkthrough setup and what you will need for this combined workspace. \nThat is you will not need the BaseURL setting in the axiosDefaults.js file when it is created. \nThis is because the combined workspace will receive the JSON from the API from the same URL,\n just on a different port (which was set with the proxy above).\n\n// IMPORTANT!!\n // Because this React app is running in the same workspace as the API,\n\n // there is no need to set a separate baseURL until you reach deployment.\n\n // Setting a baseURL before you reach deployment will cause errors\n*/\n\nimport axios from 'axios'\n// as this is the type of data our API will be expecting, and multipart because there is images other than text\naxios.defaults.baseURL = '/api';\naxios.defaults.headers.post['Content-Type'] = 'multipart/form-data'\n// To avoid CORS errors while sending cookies\naxios.defaults.withCredentials = true;\naxios.defaults.xsrfCookieName = 'csrftoken';\naxios.defaults.xsrfHeaderName = 'X-CSRFTOKEN';\n\nexport const axiosRes = axios.create();\n\nexport const axiosReq = axios.create();","import axios from \"axios\"\nimport { createContext, useContext, useEffect, useMemo, useState } from \"react\"\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\"\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\"\n\nexport const CurrentUserContext = createContext()\nexport const SetCurrentUserContext = createContext()\n\nexport const useCurrentUser = () => useContext(CurrentUserContext)\nexport const useSetCurrentUser = () => useContext(SetCurrentUserContext)\n\nexport const CurrentUserProvider = ({children}) => {\n    const [currentUser, setCurrentUser] = useState(null)\n\n    const handleMount = async () => {\n        try{\n            const {data} = await axiosRes.get('/dj-rest-auth/user/')\n            console.log('DATA: ', data)\n            setCurrentUser(data)\n        } catch(err){\n            console.log('ERROR: ', err.response)\n        }\n    }\n\n    console.log('currentUser: ', currentUser)\n\n    useEffect(()=>{\n        handleMount()\n    },[])\n\n    const history = useHistory()\n    useMemo(()=> {\n        // At the moment we don’t have any code  to use our request interceptor with,  \n        // because we aren’t making any requests that need  it yet. But don’t worry, we will be using it soon.\n          // request\n          axiosReq.interceptors.request.use(\n            async (config) => {\n    \n              /**\n               * inside the CurrentUserContext file. Here, inside the request interceptor,\n                we’ll put the entire try-catch block inside an if statement. The if-block will run only if the\n                token should be refreshed, so we’ll auto-import the shouldRefreshToken function and call it.\n               */\n                try {\n                  await axios.post(\"/dj-rest-auth/token/refresh/\");\n                } catch (err) {\n                  setCurrentUser((prevCurrentUser) => {\n                    if (prevCurrentUser) {\n                      history.push(\"/signin\");\n                    }\n                    return null;\n                  });\n                  return config;\n                }\n              return config;\n            },\n            (err) => {\n              // incase error reject promise with it\n              return Promise.reject(err);\n            }\n          );\n    \n          // response\n          axiosRes.interceptors.response.use(\n            // if no error return response\n            (response) => response,\n            // if there is error well check if its 401\n            async(err) => {\n              if(err.response?.status === 401){\n                try{\n                  // now try to refresh the access token\n                  await axios.post('/dj-rest-auth/token/refresh/')\n                } catch(err){\n                  // if above refresh fails we'll redirect user to sign in page\n                  setCurrentUser(prevCurrentUser => {\n                    if(prevCurrentUser){\n                      history.push('/signin')\n                    }\n                    // and set data to null\n                    return null\n                  })\n                }\n                // If there’s no error refreshing the token, I’ll return an axios instance with the  error config to exit the interceptor.\n                return axios(err.config)\n              }\n              // In case the error wasn’t 401, I’ll just reject the  Promise with the error to exit the interceptor.\n              return Promise.reject(err)\n            }\n          )\n        // we shouldn’t forget to add a dependency  \n        // array for our useMemo hook with history  inside. We want useMemo to only run once,  \n        // but the linter will throw a warning if  we provided an empty dependency array.\n        },[history])\n\n    return(\n        <CurrentUserContext.Provider value={currentUser}>\n            <SetCurrentUserContext.Provider value={setCurrentUser}>\n                {children}\n            </SetCurrentUserContext.Provider>\n        </CurrentUserContext.Provider>\n    )\n}","import React from 'react'\nimport styles from '../styles/Avatar.module.css'\n\nconst Avatar = ({ src, height = 45, text }) => {\n    //https://zaiste.net/posts/javascript-destructuring-assignment-default-values/\n    //1. const { src, height = 45, text } = props;  OR 2. we can move it in (props) above directly\n  return (\n    <span>\n        <img \n        className={styles.Avatar}\n        src={src}\n        height={height}\n        width={height}\n        alt='avatar' />\n        {text}\n    </span>\n  )\n}\n\nexport default Avatar","import React, { useState } from 'react'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Container from 'react-bootstrap/Container'\nimport Nav from 'react-bootstrap/Nav'\n// import Button from 'react-bootstrap/Button'\n// import Form from 'react-bootstrap/Form'\n// import FormControl from 'react-bootstrap/FormControl'\nimport logo from '../assets/versus-logo.png'\nimport styles from '../styles/NavBar.module.css'\nimport { NavLink, useHistory } from 'react-router-dom/cjs/react-router-dom.min'\nimport { useCurrentUser, useSetCurrentUser } from '../contexts/CurrentUserContext'\nimport axios from 'axios'\nimport Avatar from './Avatar'\nimport { Modal } from 'react-bootstrap'\nimport Button from 'react-bootstrap/Button';\n\nconst NavBar = () => {\n  const currentUser = useCurrentUser()\n  const setCurrentUser = useSetCurrentUser()\n  const [show, setShow] = useState(false);\n  const handleClose = () => setShow(false);\n  const handleShow = (event) => {\n    event.preventDefault();\n    setShow(true)\n  };\n  const history = useHistory()\n\n  const handleSignOut = async() => {\n    try{\n      await axios.post('/dj-rest-auth/logout/')\n      setCurrentUser(null)\n      history.push('/')\n    }catch(err){\n      console.log(err.response?.data)\n    }\n    handleClose();\n  }\n\n  // console.log(currentUser)\n\n  const addPostIcon = (\n    <NavLink className={styles.NavLink} activeClassName={styles.Active} to='/posts/create'><i className=\"far fa-plus-square\"></i>Add Post</NavLink>\n  )\n\n  const loggedInIcons = (\n    <>\n      <NavLink className={styles.NavLink} activeClassName={styles.Active} to='/trending'><i className=\"fa-solid fa-arrow-trend-up\"></i>Trending</NavLink>\n      <NavLink className={styles.NavLink} activeClassName={styles.Active} to='/voted'><i className=\"fa-solid fa-square-poll-vertical\"></i>Voted</NavLink>\n      <NavLink className={styles.NavLink} onClick={handleShow} to=''><i className=\"fas fa-sign-out-alt\"></i>Sign out</NavLink>\n      <NavLink className={styles.NavLink} to={`/profiles/${currentUser?.profile_id}`}><Avatar src={currentUser?.profile_image} text={currentUser?.username} height={40} /></NavLink>\n    </>\n  )\n  const loggedOutIcons = (\n    <>\n      <NavLink to='/signin' className={styles.NavLink} activeClassName={styles.Active}><i className=\"fa-solid fa-right-to-bracket\"></i>Sign in</NavLink>\n      <NavLink to='/signup' className={styles.NavLink} activeClassName={styles.Active}><i className=\"fa-solid fa-user-plus\"></i>Sign up</NavLink>\n    </>\n  )\n  return (\n    <div>\n      <Navbar className={styles.NavBar} expand=\"md\" fixed='top'>\n          <Container>\n            <NavLink to='/'>\n              <Navbar.Brand>\n                <img src={logo} alt='versus logo' height={75} width={75}/>\n              </Navbar.Brand>\n              </NavLink>\n\n              {/* Current logged in user Icon */}\n              {currentUser && addPostIcon}\n\n              <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n              <Navbar.Collapse id=\"basic-navbar-nav\">\n                  <Nav className=\"ml-auto text-left\">\n                      <NavLink exact to='/' className={styles.NavLink} activeClassName={styles.Active}><i className=\"fa-solid fa-house\"></i>Home</NavLink>\n                      {currentUser ? loggedInIcons : loggedOutIcons}\n                  </Nav>\n              </Navbar.Collapse>\n          </Container>\n      </Navbar>\n\n      <Modal show={show} onHide={handleClose}>\n      <Modal.Header closeButton className=\"bg-light text-dark\">\n        <Modal.Title>Sign Out</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <p className=\"text-dark\">Are you sure you want to sign out?</p>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"outline-secondary\" onClick={handleClose}>\n          Cancel\n        </Button>\n        <Button variant=\"danger\" onClick={handleSignOut}>\n          Sign Out\n        </Button>\n      </Modal.Footer>\n    </Modal>\n      </div>\n  )\n}\n\nexport default NavBar","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport { Spinner } from \"react-bootstrap\";\nimport styles from \"../styles/Asset.module.css\";\n\nconst Asset = ({ spinner, src, message }) => {\n  return (\n    <div className={`${styles.Asset} p-4`}>\n      {spinner && <Spinner animation=\"border\" />}\n      {src && <img src={src} alt={message} />}\n      {message && <p className=\"mt-4\">{message}</p>}\n    </div>\n  );\n};\n\nexport default Asset;","import React from 'react'\nimport NoResults from '../assets/no-results.png'\nimport styles from '../styles/NotFound.module.css'\nimport Asset from '../components/Asset'\n\nconst NotFound = () => {\n  return (\n    <div className={styles.NotFound}>\n        <Asset src={NoResults} message={\"Sorry, the page you're looking for doesn't exist\"}/>\n    </div>\n  )\n}\n\nexport default NotFound","import axios from \"axios\"\nimport { useEffect } from \"react\"\nimport { useHistory } from \"react-router-dom\"\n\nexport const useRedirect = (userAuthStatus) => {\n    \n    const history  = useHistory()\n\n\n    useEffect(()=>{\n        const handleMount = async () => {\n            try{\n                /*\n                Inside the try block, we’ll make a post request to the dj-rest-auth/token/refresh\n                endpoint with the default axios instance, which we’ll have to auto-import.\n                We don’t need either of our axios interceptors here because\n                this endpoint (/token/) will let us know if the user is authenticated or not.\n                The post request will act like a check as to whether the user is currently logged in or not.\n                If a user is logged in; the access token will be refreshed successfully,\n                and any code left in the try block will be able to run. \n                */\n                //if the user is logged in, the code below will run\n                await axios.post('/dj-rest-auth/token/refresh/')\n                if(userAuthStatus === 'loggedIn'){\n                    history.push('/')\n                }\n            }catch(err){\n                /*\n                If they’re not logged in though,\n                we’ll get a response with the 401 error, and then the code in our catch block will run.\n                So, if our user is logged in, and our userAuthStatus is set to the “loggedIn” string,\n                then we know we should redirect the user. So we’ll add an if statement to check for that,\n                and then push them back to the home page.\n                */\n                //if the user is logged in, the code below will run\n                if(userAuthStatus === 'loggedOut'){\n                    history.push('/')\n                }\n            }\n        }\n        handleMount()\n    },[history, userAuthStatus])\n}","import React,{useState} from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport styles from \"../../styles/SignInUpForm.module.css\";\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Image from \"react-bootstrap/Image\";\nimport Container from \"react-bootstrap/Container\";\n\nimport axios from \"axios\";\nimport { useRedirect } from \"../../hooks/useRedirect\";\n\nconst SignUpForm = () => {\n  useRedirect('loggedIn')\n    const [signUpData, setSignUpData] = useState({\n        username: '',\n        password1: '',\n        password2: '',\n    });\n    const { username, password1, password2} = signUpData\n    const [errors, setErrors] = useState({});\n    const history = useHistory();\n    \n    const handleChange = (event) => {\n        setSignUpData({\n            ...signUpData,\n            [event.target.name]: event.target.value,\n        })\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        try{\n            // const csrfToken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];\n            await axios.post('/dj-rest-auth/registration/', signUpData)//,{\n                // headers: {\n                // 'X-CSRFToken': csrfToken,\n                // },})\n          history.push('/signin')\n        } catch(err){\n          // This code with the question mark is called  optional chaining. What it does is check if  \n          // response is defined before looking for the data.  So if response isn’t defined, it won’t throw an error.\n          setErrors(err.response?.data);\n          console.log(err.response?.data.detail)\n        }\n    }\n\n\n  return (\n    <Row className={styles.Row}>\n      <Col className=\"my-auto py-2 p-md-2\" md={6}>\n        <Container className={`${appStyles.Content} p-4 `}>\n          <h1 className={styles.Header}>sign up</h1>\n\n                <Form onSubmit={handleSubmit}>\n                    <Form.Group controlId=\"username\">\n                        <Form.Label className=\"d-none\">username</Form.Label>\n                        <Form.Control type=\"text\" placeholder=\"username\" name='username'\n                            className={styles.Input}\n                            value={username}\n                            onChange={handleChange} />\n                    </Form.Group>\n                    {errors.username?.map((message, idx) => (\n                        <Alert variant=\"warning\" key={idx}>{message}</Alert>\n                    ))}\n\n                    <Form.Group controlId=\"password1\">\n                        <Form.Label className=\"d-none\">Password</Form.Label>\n                        <Form.Control type=\"password\" placeholder=\"Password\" name=\"password1\"\n                            className={styles.Input}\n                            value={password1}\n                            onChange={handleChange} />\n                    </Form.Group>\n                    {errors.password1?.map((message, idx) => (\n                        <Alert variant=\"warning\" key={idx}>{message}</Alert>\n                    ))}\n\n                    <Form.Group controlId=\"password2\">\n                        <Form.Label className=\"d-none\">Confirm Password</Form.Label>\n                        <Form.Control type=\"password\" placeholder=\"Password\" name=\"password2\"\n                            className={styles.Input}\n                            value={password2}\n                            onChange={handleChange} />\n                    </Form.Group>\n                    {errors.password2?.map((message, idx) => (\n                        <Alert variant=\"warning\" key={idx}>{message}</Alert>\n                    ))}\n\n                    <Button className={`${btnStyles.Button} ${btnStyles.Wide} ${btnStyles.Bright}`} type=\"submit\">\n                        Sign Up\n                    </Button>\n\n                    {/* Add non_fields_erros like if password does not match */}\n                    {errors.non_field_errors?.map((message, idx) => (\n                        <Alert variant=\"warning\" key={idx} className=\"mt-3\">{message}</Alert>\n                    ))}\n                </Form>\n\n        </Container>\n        <Container className={`mt-3 ${appStyles.Content}`}>\n          <Link className={styles.Link} to=\"/signin\">\n            Already have an account? <span>Sign in</span>\n          </Link>\n        </Container>\n      </Col>\n      <Col\n        md={6}\n        className={`my-auto d-none d-md-block p-2 ${styles.SignUpCol}`}\n      >\n        <Image\n          className={`${appStyles.FillerImage}`}\n          src={\n            \"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero2.jpg\"\n          }\n        />\n      </Col>\n    </Row>\n  );\n};\n\nexport default SignUpForm;","import { axiosReq } from \"../api/axiosDefaults\";\nimport jwtDecode from \"jwt-decode\"\n\nexport const fetchMoreData = async (resource, setResource) => {\n  try {\n    let url=new URL(resource.next)\n    let correctUrl = resource.next.split(url.origin)[1]\n    const temp = correctUrl.split('/').slice(2);\n    correctUrl = `/${temp.join('/')}`;\n    console.log('correctUrl',correctUrl)\n    const { data } = await axiosReq.get(correctUrl);\n    console.log(data);\n    setResource((prevResource) => ({\n      ...prevResource,\n      next: data.next,\n      results: data.results.reduce((acc, cur) => {\n        return acc.some((accResult) => accResult.id === cur.id)\n          ? acc\n          : [...acc, cur];\n      }, prevResource.results),\n    }));\n  } catch (err) {\n    console.log(err)\n  }\n};\n\nexport const followHelper = (profile, clickedProfile, sender_id) => {\n  return profile.id === clickedProfile.id\n  ?\n  // This is the profile I clicked on,\n  // update its followers count and set its following id\n  {\n      ...profile,\n      // follower_count : profile.follower_count + 1,\n      sender_id\n  }\n  : profile.is_owner\n  ?\n  // This is the profile of logged in user\n  // update its following count\n  {\n      ...profile,\n      // following_count: profile.following_count + 1\n  }\n  :\n  // this is not the profile the user clicked on or the profile\n  // the user owns, so just return it unchanged\n  profile\n} \n\nexport const unfollowHelper = (profile, clickedProfile, sender_id) => {\n  return profile.id === clickedProfile.id\n  ?\n  // This is the profile I clicked on,\n  // update its followers count and set its following id\n  {\n      ...profile,\n      // follower_count : profile.follower_count - 1,\n      sender_id\n  }\n  : profile.is_owner\n  ?\n  // This is the profile of logged in user\n  // update its following count\n  {\n      ...profile,\n      // following_count: profile.following_count - 1\n  }\n  :\n  // this is not the profile the user clicked on or the profile\n  // the user owns, so just return it unchanged\n  profile\n}\n\nexport const setTokenTimestamp = (data) => {\n  const refreshTokenTimestamp = jwtDecode(data?.refresh).exp;\n  localStorage.setItem(\"refreshTokenTimestamp\", refreshTokenTimestamp);\n}\n\nexport const shouldRefreshToken = () => {\n  return !!localStorage.getItem(\"refreshTokenTimestamp\");\n};\n\nexport const removeTokenTimestamp = () => {\n  localStorage.removeItem(\"refreshTokenTimestamp\");\n};","import React, { useState } from \"react\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Image from \"react-bootstrap/Image\";\nimport Container from \"react-bootstrap/Container\";\n\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport styles from \"../../styles/SignInUpForm.module.css\";\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\nimport axios from \"axios\";\nimport { useSetCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { useRedirect } from \"../../hooks/useRedirect\";\nimport { setTokenTimestamp } from \"../../utils/utils\";\n\nfunction SignInForm() {\n\n    // const setCurrentUser = useContext(SetCurrentUserContext)\n    //we'll change above code to below as its now defined in CurrentUserContext.js\n    const setCurrentUser = useSetCurrentUser()\n\n    /**\n     * So, in the SignInForm component, we’ll auto-import our useRedirect\n      hook at the top of our component code. And pass it the “loggedIn” string,\n      as we want to redirect our users away from this page if they are already logged in.\n     */\n    useRedirect('loggedIn')\n    \n    const [signInData, setSignInData] = useState({\n        username : '',\n        password : ''\n    })\n    // Destructure username and password from signInData\n    const {username, password} = signInData\n    const history = useHistory();\n    const [errors, setErrors] = useState({})\n    const handleChange = (event) => {\n        setSignInData({\n            ...signInData,\n            [event.target.name] : event.target.value,\n        })\n    }\n    const handleSubmit = async (event) => {\n        //so that the page doesn’t refresh.\n        event.preventDefault()\n        try{\n          console.log('signInData: ', signInData)\n            // const csrfToken = document.cookie.match(/csrftoken=([^ ;]+)/)[1];\n            // await axios.post(\"/dj-rest-auth/login/\", signInData)//,{\n                // headers: {\n                // 'X-CSRFToken': csrfToken,\n                // },})\n            const {data} = await axios.post('/dj-rest-auth/login/',signInData)\n            // setting curent user value fetched from drf API\n            setCurrentUser(data.user)\n            console.log(data)\n            // console.log(data.user)\n\n            // Now this function should extract the expiry date from the access token and save it to the user's browser in local storage.\n            setTokenTimestamp(data);\n\n            /*Let’s now update the redirect on successful sign in to send the user back rather than\n            have them redirected to the home page.*/\n            // history.push('/')\n            history.goBack()\n        }\n        catch(err){\n          console.log(err.response?.data.detail)\n            setErrors(err.response?.data)\n        }\n    }\n  return (\n    <Row className={styles.Row}>\n      <Col className=\"my-auto p-0 p-md-2\" md={6}>\n        <Container className={`${appStyles.Content} p-4 `}>\n          <h1 className={styles.Header}>sign in</h1>\n\n          \n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId=\"username\">\n                <Form.Label className=\"d-none\">username</Form.Label>\n                <Form.Control type=\"text\" placeholder=\"username\" name=\"username\" className=\"styles.Input\"\n                onChange={handleChange}\n                value={username} />\n            </Form.Group>\n            {errors.username?.map((message, idx) => (\n                <Alert variant=\"warning\" key={idx}>{message}</Alert>\n            ))}\n\n            <Form.Group controlId=\"password\">\n                <Form.Label className=\"d-none\">Password</Form.Label>\n                <Form.Control type=\"password\" placeholder=\"Password\" name=\"password\" className=\"styles.Input\"\n                onChange={handleChange}\n                value={password} />\n            </Form.Group>\n            {errors.password?.map((message, idx) => (\n                <Alert variant=\"warning\" key={idx}>{message}</Alert>\n            ))}\n\n            <Button className={`${btnStyles.Button} ${btnStyles.Wide} ${btnStyles.Bright}`} variant=\"primary\" type=\"submit\">\n                Sign in\n            </Button>\n            {/* Add non_fields_erros like if password does not match */}\n            {errors.non_field_errors?.map((message, idx)=>(\n              <Alert variant=\"warning\" key={idx} className=\"mt-3\">{message}</Alert>\n            ))}\n          </Form>\n\n        </Container>\n        <Container className={`mt-3 ${appStyles.Content}`}>\n          <Link className={styles.Link} to=\"/signup\">\n            Don't have an account? <span>Sign up now!</span>\n          </Link>\n        </Container>\n      </Col>\n      <Col\n        md={6}\n        className={`my-auto d-none d-md-block p-2 ${styles.SignInCol}`}\n      >\n        <Image\n          className={`${appStyles.FillerImage}`}\n          src={\"https://codeinstitute.s3.amazonaws.com/AdvancedReact/hero.jpg\"}\n        />\n      </Col>\n    </Row>\n  );\n}\n\nexport default SignInForm;","import React from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport modalStyles from '../styles/Modal.module.css';\n\nconst ModalHandler = (props) => {\n  const { rules, show, close , title} = props;\n\n  const ruleItems = Object.entries(rules).map(([key, value], idx) => (\n    <div key={idx} className={modalStyles.RuleItem}>\n      <h6>{key}</h6>\n      <p>{value}</p>\n    </div>\n  ));\n\n  return (\n    <Modal show={show} onHide={close}>\n      <Modal.Header closeButton>\n        <Modal.Title>{title}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div className={modalStyles.RuleList}>\n          {ruleItems}\n        </div>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button onClick={close} variant=\"secondary\">Close</Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nexport default ModalHandler;\n","import React, { useEffect, useRef, useState } from \"react\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Image from \"react-bootstrap/Image\";\n\nimport Upload from \"../../assets/upload.png\";\n\nimport styles from \"../../styles/PostCreateEditForm.module.css\";\nimport appStyles from \"../../App.module.css\";\nimport btnStyles from \"../../styles/Button.module.css\";\nimport Asset from \"../../components/Asset\";\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { axiosReq, axiosRes } from \"../../api/axiosDefaults\";\nimport { useRedirect } from \"../../hooks/useRedirect\";\nimport ModalHandler from \"../../components/ModalHandler\";\n\n\nfunction PostCreateForm() {\n  useRedirect(\"loggedOut\")\n  const [errors, setErrors] = useState({});\n  const [postData, setPostData] = useState({\n    title: '',\n    content: '',\n    image: '',\n    category: '',\n    price:0,\n    location:'',\n    privacy: 0,\n  })\n  const [categories, setCategories] = useState()\n  const {title, content, image, category, price, location, privacy} = postData\n  const [rules, SetRules] = useState({'Private Post':'To keep post private, make sure to toggle Priavte Post section.','Image Size':'Image size must not increase 2MB.','Title': 'Maximum length of title is 35.',\n  'Content':'Maximum content length is 500.', 'Price':'Ensure that there are no more than 6 digits in total.','Location':'Make sure a location is a correct place.','Category':'User must select a category, else others are set by default.',\n  'Post':'The posts must be related to products and products only.'})\n  const [showModal, SetShowModal] = useState(false)\n  // const handleModalClose = () => SetShowModal(false);\n  // const handleModalShow = () => SetShowModal(true);\n  const history = useHistory()\n  // we need to create a  reference to our Form.File component so that we can access the image  file when we submit our form.  \n  const imageInput = useRef(null)\n\n  const handleMount = async() => {\n    try{\n      const {data} = await axiosRes.get('/categories/')\n      setCategories(data)\n      \n    }catch(err){\n      console.log(err)\n    }\n  }\n  useEffect(()=>{\n    handleMount()\n  },[])\n\n  // const handleChange = (event) => {\n  //   setPostData({\n  //       ...postData,\n  //       [event.target.name]: event.target.value,\n  //   })\n  // }\n\n  const handleChange = (event) => {\n    const { name, value, checked, type } = event.target;\n    const newValue = type === 'checkbox' ? checked : value;\n    setPostData({\n        ...postData,\n        [name]: newValue,\n    });\n};\n  console.log(categories)\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    // https://developer.mozilla.org/en-US/docs/Web/API/FormData\n    const formData = new FormData()\n    formData.append('title', title)\n    formData.append('content', content)\n    formData.append('price',price)\n    formData.append('location',location)\n    // get first file in image attribute files array\n    formData.append('image',imageInput.current.files[0])\n    formData.append('category',category)\n    formData.append('privacy',privacy)\n    console.log(postData.privacy)\n\n    //refresh user access token before making post request\n    try{\n        const {data} = await axiosReq.post('/products/posts/', formData)\n        history.push(`/products/posts/${data.id}`)\n    }catch(err){\n        console.log(err)\n        if(err.response?.status !== 401){\n            setErrors(err.response?.data)\n        } \n    }\n  }\n\n  //https://developer.mozilla.org/en-US/docs/Web/API/URL\nconst handleChangeImage = (event) => {\n  //incase user wants to change the image link after addig on we need to revokeObjectURL_static to clear browser refrence to previous file\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL_static\n  URL.revokeObjectURL(image)\n  setPostData({\n      ...postData,\n      // createObjectURL: https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL_static creates \n      // a local link to the file passed into it, files[0] choose the first files passed to it\n      image: URL.createObjectURL(event.target.files[0],),\n  })\n}\n\n  const textFields = (\n    <div className=\"text-center\">\n        <Form.Group controlId=\"title\">\n            <Form.Label>\n                Title\n            </Form.Label>\n            <Form.Control type=\"text\" name=\"title\" maxLength={35}\n            value={title}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.title?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n        <Form.Group controlId=\"content\">\n            <Form.Label>\n                Content\n            </Form.Label>\n            <Form.Control as=\"textarea\" rows={6} name=\"content\" maxLength={500}\n            value={content}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.content?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n          <Form.Group controlId=\"price\">\n            <Form.Label>\n                Price\n            </Form.Label>\n            <Form.Control type=\"number\" name=\"price\" maxLength={8}\n            value={price}\n            min={0}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.price?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n        <Form.Group controlId=\"location\">\n            <Form.Label>\n                Location\n            </Form.Label>\n            <Form.Control type=\"text\" name=\"location\" maxLength={35}\n            value={location}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.location?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n<Form.Group controlId=\"category\">\n  <Form.Label>Select Post category</Form.Label>\n  <Form.Control as=\"select\" name=\"category\" value={category} onChange={handleChange}>\n    {categories ? (\n      Object.entries(categories).map(([value, label]) => (\n        <option key={value} value={value}>{label}</option>\n      ))\n    ) : (\n      <option>Loading...</option>\n    )}\n  </Form.Control>\n</Form.Group>\n\n{/* className={modalStyles.RulesContainer} */}\n      <div>\n        <Button className={`${btnStyles.Button} ${btnStyles.Black} mb-2`} onClick={()=>SetShowModal(true)}>\n          Post creation rules\n        </Button>\n        <ModalHandler show={showModal} close={() => SetShowModal(false)} rules={rules} title=\"Post creation rules\"/>\n      </div>\n      <Button\n        className={`${btnStyles.Button} ${btnStyles.Blue}`}\n        onClick={() => history.goBack()}\n      >\n        cancel\n      </Button>\n      <Button className={`${btnStyles.Button} ${btnStyles.Blue}`} type=\"submit\">\n        create\n      </Button>\n    </div>\n  );\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Row className=\"mt-4\">\n        <Col>\n        <Form.Group controlId=\"privacy\" className={`${appStyles.Content} text-center`}>\n            <Form.Check \n            type=\"switch\"\n            id=\"privacy\"\n            name=\"privacy\"\n            label=\"Private Post ?\"\n            value={privacy}\n            onChange={handleChange} />\n            </Form.Group>\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"py-2 p-0 p-md-2\" md={7} lg={8}>\n          <Container\n            className={`${appStyles.Content} ${styles.Container} d-flex flex-column justify-content-center`}\n          >\n            <Form.Group className=\"text-center\">\n                {image ? (\n                    <>\n                        <figure>\n                            <Image className={appStyles.Image} src={image} rounded/>\n                        </figure>\n                        <div>\n                            <Form.Label className={`${btnStyles.Button} ${btnStyles.Blue} btn`} htmlFor=\"image-upload\">\n                                Change the image\n                            </Form.Label>\n                        </div>\n                    </>\n                ) : (\n                    <Form.Label\n                    className=\"d-flex justify-content-center\"\n                    htmlFor=\"image-upload\">\n                    <Asset src={Upload} message=\"Click or tap to upload an image\" />\n                </Form.Label>\n                )}\n                {/* Image upload '/*' so that only images are accepted */}\n                <Form.File\n                    id=\"image-upload\" accept=\"image/*\"\n                    onChange={handleChangeImage} \n                    ref={imageInput} />\n            </Form.Group>\n            {errors.image?.map((message, idx)=>(\n                <Alert variant=\"warning\" key={idx}>{message}</Alert>\n            ))}\n            <div className=\"d-md-none\">{textFields}</div>\n          </Container>\n        </Col>\n        <Col md={5} lg={4} className=\"d-none d-md-block p-0 p-md-2\">\n          <Container className={appStyles.Content}>{textFields}</Container>\n        </Col>\n      </Row>\n    </Form>\n  );\n}\n\n\nexport default PostCreateForm;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUmSURBVHgB7Z1NbxtFGMf/M7Nre3HitElRoLIlDiBFFbdIVKVCKh+AU8sXqNo7Uk+cEOJKvwEfAAV6KhfEASREoyJya0tQg1TJbqUc6qS1E6/3bZixcbp2nZdN7J3d5vlJq/V6d63o+e28O34YToiUkn0KiA3Ant8Ed1oQXQs85GC+AC+z/j5+j+1CIIP4JYTxYy94dVzyEXplBFYEubuIoAqEv6qNMSZxAhgSogNeU3/PuScoRg4KWQ1matjwQw+BY6FbrcL7gbEwye1HFnBBysLMU8yGAQog9mXHgndWYne1xjpHuf5QART441FU1de2i+1HHzLvoOsOFLD8l5zDObwF4ti0XbT/WWKt/c6PFaDr+YtPMU9P/WTY6cBbX0ITYxpsPu4GCv5kKavOytI65sede03A5XVJ9f0U0BLefywro+8PCdANrlvCDIipMGejfOGBHHq4hwSc+RdnQEyVSGA2frwn4FJdOmoEe7oHVSmgq6J4KdgTEDLqbqZFvBT0BHwupaCGNz10KVB9/d4QoCeg0aDgp021gZLe9wR0AhRBpMpiuf/Q9wSwQM3pEaniN/sPPcdXknMbFohUsXWPU7UDfPkz6nqa4opayOLPF0iAKTYasHnFIQGmWFTLtjzgyZcliclQKqgqyKHpB2O4ApyLXeoBmUJN/zAOwhheW5UAEMZQ7S/n7mn/Xo9BSh0qAcYhAYYhAYbhNo0DjKFjTyXAMCTAMCTAMCTAMCTAMLkVEESo+R7u6y3kqCKn5FKADr4M8CMkanqLXNzJq4TcCRgK/oAcS8iVgJHg12On6nmVkBsBo8HnFq4Ozqk11WvIqYRcCBgXfCHQGJy3iqjnVULmBRwW/AF5lZB5AdLHjcOCP+A1CV3cQsbJ/IK8sLASRqiopaPbBwV/gJYQdHEtAm5YEVaQcdjyE/kucorfxTO9t4s4j5xCUxGGIQGGIQGGIQGGIQGGIQGGyZSArZs/3dcbpsS0P/84ZGogJkNZS3hLPcnFx/j8qZPrr6arAdhF5BxqAwxDAgxDAgyTSQHt359VcErIlABmi3t6H9x5eBMTxFdCt7/4pbc2IAV7iAyRqV6QeG/udvC4+XH00r3VvH53Kosp/J25b5EhMlUCKl9eXrVqlevMmvxTymx+z/pg/urZbz75GRki1wsybwLUCzIMCTAMCTAMCTAMCTAM9wMkyvhATA4deyoBhiEBhiEBhuFC4kRpmIjjExQRcNtBBMIYXGxTCTAJ985TN9QUTll1Q63nVAJM0dHjgM4slQBTOD4i3vSpETbFC1X988VNBCCMoDOy8rW7VAWZ4jctAF+ziCbk0qdlw9epDXtTEfY8uiBSZdZVAvD/XNDmDjwQqbJZ6Me8n0XpOyoBadNY7QvYyx3w0d9yIXQonVUadAS6j2qsqV/vTUe3Q7RApMJL5WDwek+ATr0tOtQWTBvd42zE8s0PLchQKZg+gYvt+PGQAF0KLB87IKZCp42WjnH8vbEJfKhBnjzxhjfO2DXhP7/HFrUHk6MX/Cq2xp07MIXVlQdypjUznAGaSEapjPYfb7N929ZDc4jp7M9WCWfoZ+6ToZ96vEB7tM4f5chJ3Kp16dTUGoIXUurbgzhq4Ackz6K3IkX1EgqLnmqkS9Bzeqc6FW6kv1qyC0/P7TSqcPUMZ5L7T57GUEq2vAZLJwXtOBALHMxpQRQKr6osd6T64t1s/oe+Dmb8mEeQhQhRW+8DRKUKoo0Qka1WEfVC1tqyuj5hwEf5D7ZH39OOpDxXAAAAAElFTkSuQmCC\"","import React from \"react\";\nimport Dropdown from \"react-bootstrap/Dropdown\";\nimport styles from \"../styles/MoreDropdown.module.css\";\nimport { useHistory } from \"react-router\";\n\n// The forwardRef is important!!\n// Dropdown needs access to the DOM node in order to position the Menu\nconst ThreeDots = React.forwardRef(({ onClick }, ref) => (\n  <i\n    className=\"fas fa-ellipsis-v\"\n    ref={ref}\n    onClick={(e) => {\n      e.preventDefault();\n      onClick(e);\n    }}\n  />\n));\n\nexport const MoreDropdown = ({ handleEdit, handleDelete }) => {\n  return (\n    <Dropdown className=\"ml-auto\" drop=\"left\">\n      <Dropdown.Toggle as={ThreeDots} />\n\n      <Dropdown.Menu\n        className=\"text-center\"\n        popperConfig={{ strategy: \"fixed\" }}\n      >\n        <Dropdown.Item\n          className={styles.DropdownItem}\n          onClick={handleEdit}\n          aria-label=\"edit\"\n        >\n          <i className=\"fas fa-edit\" />\n        </Dropdown.Item>\n        <Dropdown.Item\n          className={styles.DropdownItem}\n          onClick={handleDelete}\n          aria-label=\"delete\"\n        >\n          <i className=\"fas fa-trash-alt\" />\n        </Dropdown.Item>\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nexport function ProfileEditDropdown({ id }) {\n  const history = useHistory();\n  return (\n    <Dropdown className={`ml-auto px-3 ${styles.Absolute}`} drop=\"left\">\n      <Dropdown.Toggle as={ThreeDots} />\n      <Dropdown.Menu>\n        <Dropdown.Item\n          onClick={() => history.push(`/profiles/${id}/edit`)}\n          aria-label=\"edit-profile\"\n        >\n          <i className=\"fas fa-edit\" /> edit profile\n        </Dropdown.Item>\n        <Dropdown.Item\n          onClick={() => history.push(`/profiles/${id}/edit/username`)}\n          aria-label=\"edit-username\"\n        >\n          <i className=\"far fa-id-card\" />\n          change username\n        </Dropdown.Item>\n        <Dropdown.Item\n          onClick={() => history.push(`/profiles/${id}/edit/password`)}\n          aria-label=\"edit-password\"\n        >\n          <i className=\"fas fa-key\" />\n          change password\n        </Dropdown.Item>\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n}","import React from \"react\";\nimport styles from \"../../styles/Post.module.css\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { Card, Media, OverlayTrigger, Table, Tooltip } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"../../components/Avatar\";\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { axiosRes } from \"../../api/axiosDefaults\";\nimport { MoreDropdown } from \"../../components/MoreDropdown\";\n\nconst Post = (props) => {\n    const {id, owner, category, category_name, content, created_at, down_vote_id,\n    image, profile_id, profile_image, title, up_vote_id, updated_at,postPage,\n    down_votes_count, up_votes_count, comments_count, location, price, setPosts, privacy} = props\n    \n    const currentUser = useCurrentUser()\n    const is_owner = currentUser?.username === owner\n    const history = useHistory()\n\n    const handleEdit = () => {\n      history.push(`/products/posts/${id}/edit`)\n    }\n\n    const handleDelete = async () => {\n      try {\n        await axiosRes.delete(`/products/posts/${id}/`);\n        history.goBack();\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    const handleUpVote = async () => {\n      try{\n        const postData = {\n          product: id, // Assuming you have product object passed as a prop\n          up_vote:  true,\n          down_vote: false, // Set to false as it's an upvote\n        };\n        const {data} = await axiosRes.post('/votes/', postData)\n        setPosts((prevPosts)=>({\n          ...prevPosts,\n          results: prevPosts.results.map((post) => {\n            return post.id === id\n            ? {...post, up_votes_count: post.up_votes_count + 1, up_vote_id: data.id}: post;\n          })\n        }))\n      }catch(err){\n        console.log(err)\n      }\n    }\n  \n    const handleVoteDelete = async () => {\n      try{\n        let vote_id = 0\n        if (up_vote_id === null){\n          vote_id = down_vote_id\n        }else{\n          vote_id = up_vote_id\n        }\n        await axiosRes.delete(`/votes/${vote_id}/`)\n        setPosts((prevPosts)=>({\n          ...prevPosts,\n          results: prevPosts.results.map((post) => {\n            return post.id === id && up_vote_id\n            ? {...post, up_votes_count: post.up_votes_count - 1, up_vote_id: null}\n            : post.id === id && down_vote_id\n            ? {...post, down_votes_count: post.down_votes_count - 1, down_vote_id: null}\n            : post;\n          })\n        }))\n      }catch(err){\n        console.log(err)\n      }\n    }\n    const handleDownVote = async () => {\n      try{\n        const postData = {\n          product: id,\n          up_vote:  false,\n          down_vote: true,\n        };\n        const {data} = await axiosRes.post('/votes/', postData)\n        setPosts((prevPosts)=>({\n          ...prevPosts,\n          results: prevPosts.results.map((post) => {\n            return post.id === id\n            ? {...post, down_votes_count: post.down_votes_count + 1, down_vote_id: data.id}: post;\n          })\n        }))\n      }catch(err){\n        console.log(err)\n      }\n    }\n\n  return (\n    <Card className={styles.Post}>\n      <Card.Body>\n        <Media className=\"align-items-center justify-content-between\">\n          <Link to={`/profiles/${profile_id}`}>\n            <Avatar src={profile_image} height={55} />\n            {owner}\n          </Link>\n          <div className=\"d-flex align-items-center\">\n            <span>{updated_at}</span>\n            {is_owner && postPage && (\n              <MoreDropdown\n                handleEdit={handleEdit}\n                handleDelete={handleDelete}\n              />\n            )}\n          </div>\n        </Media>\n      </Card.Body>\n      <Link to={`/products/posts/${id}`}>\n        <Card.Img src={image} alt={title} />\n      </Link>\n      <Card.Body>\n        {title && <Card.Title className=\"text-center\">{title}</Card.Title>}\n        {content && <Card.Text>Description: {content}</Card.Text>}\n        {category_name && <Card.Text>Catgory: {category_name}</Card.Text>}\n        {price && <Card.Text>Price: {price} &#8364;</Card.Text>}\n        {location && <Card.Text>Location: {location}</Card.Text>}\n        {privacy===true ? (<Card.Text>Private post: Yes</Card.Text>):(<Card.Text>Private post: No</Card.Text>)}\n        <span className={`mr-5 ${styles.PostBar}`}>\n          {is_owner ? (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>You can't vote on your own post!</Tooltip>}\n            >\n              <i className=\"fa-solid fa-thumbs-up\" />\n            </OverlayTrigger>\n          ) : up_vote_id && !down_vote_id ? (\n\n            <span onClick={() => {}}>\n              <i className={`fa-solid fa-thumbs-up ${styles.Heart}`} />\n            </span>\n          ) : currentUser && !up_vote_id && !down_vote_id ? (\n            // have not up voted yet\n            <span onClick={handleUpVote} value=\"upVote\">\n              <i className={`fa-solid fa-thumbs-up ${styles.HeartOutline}`} />\n            </span>\n          ) : !up_vote_id && down_vote_id ? (\n            // already upvoted\n            <span>\n              <i className=\"fa-solid fa-thumbs-up\" />\n            </span>\n          ): (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>Log in to vote on posts!</Tooltip>}\n            >\n              <i className=\"fa-solid fa-thumbs-up\" />\n            </OverlayTrigger>\n          )}\n          \n\n        </span>\n\n        <span className={styles.PostBar}>\n          {is_owner ? (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>You can't vote on your own post!</Tooltip>}\n            >\n              <i className=\"fa-solid fa-xmark\" />\n            </OverlayTrigger>\n          ) : up_vote_id  || down_vote_id ? (\n            <span onClick={handleVoteDelete}>\n              Remove vote<i className={`fa-solid fa-xmark`} />{/** ${styles.Heart} */}\n            </span>\n          ) : !up_vote_id  || !down_vote_id ? (\n            <span>\n              Remove vote<i className={`fa-solid fa-xmark`} />{/** ${styles.Heart} */}\n            </span>\n          ) : (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>Log in to remove vote!</Tooltip>}\n            >\n              <i className=\"fa-solid fa-xmark\" />\n            </OverlayTrigger>\n          )}\n          \n\n        </span>\n\n        <span className={`ml-5 ${styles.PostBar}`}>\n          {is_owner ? (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>You can't vote on your own post!</Tooltip>}\n            >\n              <i className=\"fa-solid fa-thumbs-down\" />\n            </OverlayTrigger>\n          ) : down_vote_id && !up_vote_id ? (\n            <span onClick={() => {}}>\n              <i className={`fa-solid fa-thumbs-down ${styles.Heart}`} />\n            </span>\n          ) : currentUser && ! down_vote_id && !up_vote_id? (\n            <span onClick={handleDownVote}>\n              <i className={`fa-solid fa-thumbs-down ${styles.HeartOutline}`} />\n            </span>\n          ): up_vote_id && !down_vote_id ? (\n            // already upvoted\n            <span>\n              <i className=\"fa-solid fa-thumbs-down\" />\n            </span>\n          ) : (\n            <OverlayTrigger\n              placement=\"top\"\n              overlay={<Tooltip>Log in to vote on posts!</Tooltip>}\n            >\n              <i className=\"fa-solid fa-thumbs-down\" />\n            </OverlayTrigger>\n          )}\n          \n\n        </span>\n\n\n        <div>\n          <Table striped bordered hover>\n            <thead>\n              <tr>\n                <th>Post Total up votes</th>\n                <th>Post Total Down votes</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>{up_votes_count}</td>\n                <td>{down_votes_count}</td>\n              </tr>\n            </tbody>\n          </Table>\n          <Link to={`/products/posts/${id}`}>\n            <i className=\"far fa-comments\" />\n          </Link>\n          {comments_count}\n        </div>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default Post;","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport Form from \"react-bootstrap/Form\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\n\nimport styles from \"../../styles/CommentCreateEditForm.module.css\";\nimport Avatar from \"../../components/Avatar\";\nimport { axiosRes } from \"../../api/axiosDefaults\";\n\nfunction CommentCreateForm(props) {\n  const { post, setPost, setComments, profileImage, profile_id } = props;\n  const [content, setContent] = useState(\"\");\n\n  const handleChange = (event) => {\n    setContent(event.target.value);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      let product = post\n      const { data } = await axiosRes.post(\"/comments/\", {\n        content,\n        product,\n      });\n      setComments((prevComments) => ({\n        ...prevComments,\n        results: [data, ...prevComments.results],\n      }));\n      setPost((prevPost) => ({\n        results: [\n          {\n            ...prevPost.results[0],\n            comments_count: prevPost.results[0].comments_count + 1,\n          },\n        ],\n      }));\n      setContent(\"\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <Form className=\"mt-2\" onSubmit={handleSubmit}>\n      <Form.Group>\n        <InputGroup>\n          <Link to={`/profiles/${profile_id}`}>\n            <Avatar src={profileImage} />\n          </Link>\n          <Form.Control\n            className={styles.Form}\n            placeholder=\"my comment...\"\n            as=\"textarea\"\n            value={content}\n            onChange={handleChange}\n            rows={2}\n          />\n        </InputGroup>\n      </Form.Group>\n      <button\n        className={`${styles.Button} btn d-block ml-auto`}\n        disabled={!content.trim()}\n        type=\"submit\"\n      >\n        post\n      </button>\n    </Form>\n  );\n}\n\nexport default CommentCreateForm;","import React, { useState } from \"react\";\n\nimport Form from \"react-bootstrap/Form\";\nimport { axiosRes } from \"../../api/axiosDefaults\";\n\nimport styles from \"../../styles/CommentCreateEditForm.module.css\";\n\nfunction CommentEditForm(props) {\n  const { id, content, setShowEditForm, setComments } = props;\n\n  const [formContent, setFormContent] = useState(content);\n\n  const handleChange = (event) => {\n    setFormContent(event.target.value);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      await axiosRes.put(`/comments/${id}/`, {\n        content: formContent.trim(),\n      });\n      setComments((prevComments) => ({\n        ...prevComments,\n        results: prevComments.results.map((comment) => {\n          return comment.id === id\n            ? {\n                ...comment,\n                content: formContent.trim(),\n                updated_at: \"now\",\n              }\n            : comment;\n        }),\n      }));\n      setShowEditForm(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Form.Group className=\"pr-1\">\n        <Form.Control\n          className={styles.Form}\n          as=\"textarea\"\n          value={formContent}\n          onChange={handleChange}\n          rows={2}\n        />\n      </Form.Group>\n      <div className=\"text-right\">\n        <button\n          className={styles.Button}\n          onClick={() => setShowEditForm(false)}\n          type=\"button\"\n        >\n          cancel\n        </button>\n        <button\n          className={styles.Button}\n          disabled={!content.trim()}\n          type=\"submit\"\n        >\n          save\n        </button>\n      </div>\n    </Form>\n  );\n}\n\nexport default CommentEditForm;","import React, { useState } from \"react\";\nimport { Media } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"../../components/Avatar\";\nimport { MoreDropdown } from \"../../components/MoreDropdown\";\nimport CommentEditForm from \"./CommentEditForm\";\n\nimport styles from \"../../styles/Comment.module.css\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { axiosRes } from \"../../api/axiosDefaults\";\n\nconst Comment = (props) => {\n  const {\n    profile_id,\n    profile_image,\n    owner,\n    updated_at,\n    content,\n    id,\n    setPost,\n    setComments,\n  } = props;\n\n  const [showEditForm, setShowEditForm] = useState(false);\n  const currentUser = useCurrentUser();\n  const is_owner = currentUser?.username === owner;\n\n  const handleDelete = async () => {\n    try {\n      await axiosRes.delete(`/comments/${id}/`);\n      setPost((prevPost) => ({\n        results: [\n          {\n            ...prevPost.results[0],\n            comments_count: prevPost.results[0].comments_count - 1,\n          },\n        ],\n      }));\n\n      setComments((prevComments) => ({\n        ...prevComments,\n        results: prevComments.results.filter((comment) => comment.id !== id),\n      }));\n    } catch (err) {}\n  };\n\n  return (\n    <>\n      <hr />\n      <Media>\n        <Link to={`/profiles/${profile_id}`}>\n          <Avatar src={profile_image} />\n        </Link>\n        <Media.Body className=\"align-self-center ml-2\">\n          <span className={styles.Owner}>{owner}</span>\n          <span className={styles.Date}>{updated_at}</span>\n          {showEditForm ? (\n            <CommentEditForm\n              id={id}\n              profile_id={profile_id}\n              content={content}\n              profileImage={profile_image}\n              setComments={setComments}\n              setShowEditForm={setShowEditForm}\n            />\n          ) : (\n            <p>{content}</p>\n          )}\n        </Media.Body>\n        {is_owner && !showEditForm && (\n          <MoreDropdown\n            handleEdit={() => setShowEditForm(true)}\n            handleDelete={handleDelete}\n          />\n        )}\n      </Media>\n    </>\n  );\n};\n\nexport default Comment;","import { createContext, useContext, useEffect, useState } from \"react\";\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\";\nimport { useCurrentUser } from \"../contexts/CurrentUserContext\";\nimport { followHelper, unfollowHelper } from \"../utils/utils\";\n\nconst ProfileDataContext = createContext();\nconst SetProfileDataContext = createContext();\n\nexport const useProfileData = () => useContext(ProfileDataContext);\nexport const useSetProfileData = () => useContext(SetProfileDataContext);\n\nexport const ProfileDataProvider = ({ children }) => {\n  const [profileData, setProfileData] = useState({\n    // we will use the pageProfile later!\n    pageProfile: { results: [] },\n    popularProfiles: { results: [] },\n  });\n\n  const currentUser = useCurrentUser();\n\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        const { data } = await axiosReq.get(\n          \"/profiles/?ordering=-total_upvotes\"\n        );\n        setProfileData((prevState) => ({\n          ...prevState,\n          popularProfiles: data,\n        }));\n        console.log(data)\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    handleMount();\n  }, [currentUser]);\n  const handleFollow = async (clickedProfile) => {\n    try{\n        // the data we'll send is what profile user just followed basically user id  -> followed: clickedProfile.id\n        const {data} = await axiosRes.post('/friends/',{request: clickedProfile.id})\n        \n        setProfileData(prevState => ({\n            // update page profile count and button\n            ...prevState,\n            pageProfile: {\n                results: prevState.pageProfile.results.map((profile) => followHelper(profile, clickedProfile, data.id)),\n            },\n            // we'll update popular profiles for now\n            popularProfiles : {\n                ...prevState.popularProfiles,\n                results: prevState.popularProfiles.results.map((profile) => followHelper(profile, clickedProfile, data.id)),\n            },\n        }))\n\n    }catch(err){\n        console.log(err)\n    }\n}\n\n  //handle unfollow\n  const handleUnfollow = async(clickedProfile) => {\n      try{\n          await axiosRes.delete(`/friends/${clickedProfile.sender_id}`)\n          setProfileData(prevState => ({\n              ...prevState,\n              pageProfile:{\n                  results: prevState.pageProfile.results.map((profile) => unfollowHelper(profile, clickedProfile)),\n              },\n              popularProfiles :{\n                  ...prevState.popularProfiles,\n                  results: prevState.popularProfiles.results.map((profile) => unfollowHelper(profile, clickedProfile)),\n              }\n          }))\n      }catch(err){\n          console.log(err)\n      }\n  }\n\n  return (\n    <ProfileDataContext.Provider value={profileData}>\n      <SetProfileDataContext.Provider value={{setProfileData, handleFollow, handleUnfollow}}>\n        {children}\n      </SetProfileDataContext.Provider>\n    </ProfileDataContext.Provider>\n  );\n};","import React from 'react'\nimport styles from '../../styles/Profile.module.css'\nimport btnStyles from '../../styles/Button.module.css'\nimport { useCurrentUser } from '../../contexts/CurrentUserContext'\nimport { Link } from 'react-router-dom'\nimport Avatar from '../../components/Avatar'\nimport Button from 'react-bootstrap/Button'\nimport { useSetProfileData } from '../../contexts/ProfileDataContext'\n\nconst Profile = (props) => {\n    const {profile, mobile, imageSize=55} = props\n    // now destructure data from profile\n    const {id, sender_id ,total_upvotes, image, owner} = profile\n\n    // is current user is owner of profile\n    const currentUser = useCurrentUser()\n    const is_owner = currentUser?.username === owner\n\n    //well also import handleFollow function as well from userProfileData to hande follow\n    const {handleFollow, handleUnfollow} = useSetProfileData()\n\n  return (\n    <div className={`my-3 d-flex align-items-center ${mobile && \"flex-column\"}`}>\n        <div>\n            <Link to={`/profiles/${id}`} className='align-self-center'>\n                <Avatar src={image} height={imageSize} />\n            </Link>\n        </div>\n        {/* profile owner */}\n        <div className={`mx-2 ${styles.WordBreak}`}>\n            <strong>\n                {owner}{/*, {total_upvotes} up votes*/}\n            </strong>\n        </div>\n        \n        <div className={`text-right ${!mobile && 'ml-auto'}`}>\n            {/* ternary conditions + logical operators combined */}\n            {/* We are only going to show our follow/unfollow  buttons in the desktop version of the  \n                PopularProfiles component. We also only want to  show these buttons to users who are logged in.  \n                Finally, we don’t want to show a follow button to  a user when the profile displayed is their own.\n                So let’s add some logic for  these conditions.\n                Inside the div, we’ll add the not-mobile condition to check  if we are on desktop, then we’ll check if  \n                the currentUser exists so we know our user is  logged in. And finally, we’ll also check if the  \n                user is not the owner of the profile because  our users won’t be able to follow themselves.\n                Now we know we should display a button to our user  for this profile, but should it be the follow or  \n                unfollow button? Well, if the logged in user has  followed the profile, then a following_id prop  \n                from our API response won’t be null, so we can use  this in a ternary. If the following_id does exist,  \n                we'll display our unfollow button,  auto-importing that from react-bootstrap.  \n                And if the following_id doesn’t  exist we’ll show the follow button. */}\n            {!mobile && currentUser && !is_owner && (\n                sender_id ? (\n                    <Button className={`${btnStyles.Button} ${btnStyles.BlackOutline}`} onClick={()=>handleUnfollow(profile)}>Remove Friend</Button>\n                ) : (\n                    <Button className={`${btnStyles.Button} ${btnStyles.Black}`} onClick={()=>handleFollow(profile)}>Add Friend</Button>\n                )\n            )}\n        </div>\n    </div>\n  )\n}\n\nexport default Profile","import React, { useEffect, useState } from 'react'\nimport Container from 'react-bootstrap/Container'\nimport appStyles from '../../App.module.css'\nimport Asset from '../../components/Asset'\nimport Profile from './Profile'\nimport { useProfileData } from '../../contexts/ProfileDataContext'\n\nconst PopularProfiles = ({ mobile }) => {\n    /* 7\n        Replace the code you copied from Popular Profiles, and call your new useProfileData context to destructure your popularProfiles state.\n        Important: Don't forget to tidy up your imports e.g. adding new imports, removing unused imports, making sure file paths are accurate.\n    */ \n    const { popularProfiles } = useProfileData();\n    return (\n        <Container\n          className={`${appStyles.Content} ${\n            mobile && \"d-lg-none text-center mb-3\"\n          }`}\n        >\n          {popularProfiles.results.length ? (\n            <>\n              <p>Most up voted profiles.</p>\n              {mobile ? (\n                <div className=\"d-flex justify-content-around\">\n                    {/* for mobile */}\n                  {popularProfiles.results.slice(0, 4).map((profile) => (\n                    // <p key={profile.id}>{profile.owner}</p>\n                    <Profile key={profile.id} profile={profile} mobile />\n                  ))}\n                </div>\n              ) : (\n                // for desktop\n                popularProfiles.results.map((profile) => (\n                //   <p key={profile.id}>{profile.owner}</p>\n                    <Profile key={profile.id} profile={profile} />\n                ))\n              )}\n            </>\n          ) : (\n            <Asset spinner />\n          )}\n        </Container>\n      );\n    };\n\nexport default PopularProfiles","import React, { useEffect, useState } from \"react\";\n\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Container from \"react-bootstrap/Container\";\n\nimport appStyles from \"../../App.module.css\";\nimport { useParams } from \"react-router\";\nimport { axiosReq } from \"../../api/axiosDefaults\";\nimport Post from \"./Post\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport CommentCreateForm from \"../comments/CommentCreateForm\";\nimport Comment from \"../comments/Comment\";\n\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport Asset from \"../../components/Asset\";\nimport { fetchMoreData } from \"../../utils/utils\";\nimport PopularProfiles from \"../profiles/PopularProfiles\";\n\nfunction PostPage() {\n  const currentUser = useCurrentUser();\n  const profile_image = currentUser?.profile_image;\n  const [comments, setComments] = useState({ results: [] });\n  const { id } = useParams();\n  const [post, setPost] = useState({ results: [] });\n\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        const [{data: post}, {data: comments}] = await Promise.all([\n          axiosReq.get(`/products/posts/${id}/`),\n          axiosReq.get(`/comments/?product=${id}`)\n        ])\n        setPost({ results: [post] });\n        setComments(comments)\n        console.log(post);\n        console.log(comments);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    handleMount();\n  }, [id]);\n\n  return (\n    <Row className=\"h-100\">\n      <Col className=\"py-2 p-0 p-lg-2\" lg={8}>\n        <PopularProfiles mobile/>\n        <p>Post component</p>\n        <Post {...post.results[0]} setPosts={setPost} postPage/>\n        <Container className={appStyles.Content}>\n        {currentUser ? (\n          <CommentCreateForm\n          profile_id={currentUser.profile_id}\n          profileImage={profile_image}\n          post={id}\n          setPost={setPost}\n          setComments={setComments}\n        />\n        ) : comments.results.length ? (\n          \"Comments\"\n        ) : null}\n\n        {comments.results.length ? (\n            <InfiniteScroll\n              children={comments.results.map((comment) => (\n                <Comment\n                  key={comment.id}\n                  {...comment}\n                  setPost={setPost}\n                  setComments={setComments}\n                />\n              ))}\n              dataLength={comments.results.length}\n              loader={<Asset spinner />}\n              hasMore={!!comments.next}\n              next={() => fetchMoreData(comments, setComments)}\n            />\n          ) : currentUser ? (\n            <span>No comments yet, be the first to comment!</span>\n          ) : (\n            <span>No comments... yet</span>\n          )}\n        </Container>\n      </Col>\n      <Col lg={4} className=\"d-none d-lg-block p-0 p-lg-2\">\n        <PopularProfiles />\n      </Col>\n    </Row>\n  );\n}\n\nexport default PostPage;","import React, { useEffect, useState } from \"react\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Container from \"react-bootstrap/Container\";\n\nimport Post from \"./Post\";\nimport Asset from \"../../components/Asset\";\n\nimport appStyles from \"../../App.module.css\";\nimport styles from \"../../styles/PostsPage.module.css\";\nimport { useLocation } from \"react-router\";\nimport { axiosReq } from \"../../api/axiosDefaults\";\n\nimport NoResults from \"../../assets/no-results.png\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { fetchMoreData } from \"../../utils/utils\";\nimport PopularProfiles from \"../profiles/PopularProfiles\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\n\nfunction PostsPage({ topVote, message, filter = \"\" }) {\n  const [posts, setPosts] = useState({ results: [] });\n  const [hasLoaded, setHasLoaded] = useState(false);\n  const { pathname } = useLocation();\n  const currentUser = useCurrentUser();\n\n  const [query, setQuery] = useState(\"\");\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n        try {\n          const {data} = await axiosReq.get(`/products/posts/?${filter}search=${query}`);\n          console.log(data)\n          setPosts(data);\n          setHasLoaded(true);\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    setHasLoaded(false);\n    const timer = setTimeout(() => {\n      fetchPosts();\n    }, 1000);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [filter, query, pathname,currentUser]);\n\n  return (\n    <Row className=\"h-100\">\n      <Col className=\"py-2 p-0 p-lg-2\" lg={8}>\n        <PopularProfiles mobile/>\n        <i className={`fas fa-search ${styles.SearchIcon}`} />\n        <Form\n          className={styles.SearchBar}\n          onSubmit={(event) => event.preventDefault()}\n        >\n          <Form.Control\n            value={query}\n            onChange={(event) => setQuery(event.target.value)}\n            type=\"text\"\n            className=\"mr-sm-2\"\n            placeholder=\"Search posts\"\n          />\n        </Form>\n\n        {hasLoaded ? (\n          <>\n            {posts.results.length ? (\n              <InfiniteScroll\n                children={posts.results.map((post) => (\n                  <Post key={post.id} {...post} setPosts={setPosts} />\n                ))}\n                dataLength={posts.results.length}\n                loader={<Asset spinner />}\n                hasMore={!!posts.next}\n                next={() => fetchMoreData(posts, setPosts)}\n              />\n            ) : (\n              <Container className={appStyles.Content}>\n                <Asset src={NoResults} message={message} />\n              </Container>\n            )}\n          </>\n        ) : (\n          <Container className={appStyles.Content}>\n            <Asset spinner />\n          </Container>\n        )}\n      </Col>\n      <Col md={4} className=\"d-none d-lg-block p-0 p-lg-2\">\n        <PopularProfiles />\n      </Col>\n    </Row>\n  );\n}\n\nexport default PostsPage;","import React, { useEffect, useRef, useState } from \"react\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Image from \"react-bootstrap/Image\";\n\n\nimport styles from \"../../styles/PostCreateEditForm.module.css\";\nimport appStyles from \"../../App.module.css\";\nimport btnStyles from \"../../styles/Button.module.css\";\nimport { useHistory, useParams } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { axiosReq, axiosRes } from \"../../api/axiosDefaults\";\n\n\nfunction PostEditForm() {\n    const { id } = useParams();\n  const [errors, setErrors] = useState({});\n  const [postData, setPostData] = useState({\n    title: '',\n    content: '',\n    image: '',\n    category: '',\n    price:0,\n    location:'',\n    privacy: 0,\n  })\n  const [categories, setCategories] = useState()\n  const {title, content, image, category, price, location, privacy} = postData\n  const history = useHistory()\n  // we need to create a  reference to our Form.File component so that we can access the image  file when we submit our form.  \n  const imageInput = useRef(null)\n\n  \n  const handleMount = async() => {\n    try{\n        const [{data: categories},{data:postData}] = await Promise.all([\n            axiosRes.get('/categories/'),\n            axiosReq.get(`/products/posts/${id}/`)\n          ])\n      const {title, content, image, is_owner, category, price, location, privacy} = postData\n      console.log(privacy)\n      setCategories(categories)\n      is_owner ? setPostData({ title, content, image, is_owner, category, price, location,  privacy }) : history.push('/')\n    }catch(err){\n      console.log(err)\n    }\n  }\n  useEffect(()=>{\n    handleMount()\n  },[history,id])\n\n  // const handleChange = (event) => {\n  //   setPostData({\n  //       ...postData,\n  //       [event.target.name]: event.target.value,\n  //   })\n  // }\n  const handleChange = (event) => {\n    const { name, value, checked, type } = event.target;\n    const newValue = type === 'checkbox' ? checked : value;\n    setPostData({\n        ...postData,\n        [name]: newValue,\n    });\n};\n  console.log(categories)\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n    // https://developer.mozilla.org/en-US/docs/Web/API/FormData\n    const formData = new FormData()\n    formData.append('title', title)\n    formData.append('content', content)\n    formData.append('price',price)\n    formData.append('location',location)\n    if(imageInput?.current?.files[0]){\n        formData.append('image',imageInput.current.files[0]);\n    }\n    formData.append('category',category)\n    formData.append('privacy',privacy)\n    console.log(postData.category)\n\n    //refresh user access token before making post request\n    try{\n        await axiosReq.put(`/products/posts/${id}/`, formData)\n        history.push(`/products/posts/${id}`)\n    }catch(err){\n        console.log(err)\n        if(err.response?.status !== 401){\n            setErrors(err.response?.data)\n        } \n    }\n  }\n\n  //https://developer.mozilla.org/en-US/docs/Web/API/URL\nconst handleChangeImage = (event) => {\n  //incase user wants to change the image link after addig on we need to revokeObjectURL_static to clear browser refrence to previous file\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL_static\n  URL.revokeObjectURL(image)\n  setPostData({\n      ...postData,\n      // createObjectURL: https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL_static creates \n      // a local link to the file passed into it, files[0] choose the first files passed to it\n      image: URL.createObjectURL(event.target.files[0],),\n  })\n}\n\n  const textFields = (\n    <div className=\"text-center\">\n        <Form.Group controlId=\"title\">\n            <Form.Label>\n                Title\n            </Form.Label>\n            <Form.Control type=\"text\" name=\"title\" maxLength={35}\n            value={title}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.title?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n        <Form.Group controlId=\"content\">\n            <Form.Label>\n                Content\n            </Form.Label>\n            <Form.Control as=\"textarea\" rows={6} name=\"content\" maxLength={500}\n            value={content}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.content?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n          <Form.Group controlId=\"price\">\n            <Form.Label>\n                Price\n            </Form.Label>\n            <Form.Control type=\"number\" name=\"price\" maxLength={8}\n            value={price}\n            min={0}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.price?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n        <Form.Group controlId=\"location\">\n            <Form.Label>\n                Location\n            </Form.Label>\n            <Form.Control type=\"text\" name=\"location\" maxLength={35}\n            value={location}\n            onChange={handleChange} />\n        </Form.Group>\n        {errors.location?.map((message, idx)=>(\n            <Alert variant=\"warning\" key={idx}>{message}</Alert>\n        ))}\n\n<Form.Group controlId=\"category\">\n  <Form.Label>Select Post category</Form.Label>\n  <Form.Control as=\"select\" name=\"category\" value={category} onChange={handleChange}>\n    {categories ? (\n      Object.entries(categories).map(([value, label]) => (\n        <option key={value} value={value}>{label}</option>\n      ))\n    ) : (\n      <option>Loading...</option>\n    )}\n  </Form.Control>\n</Form.Group>\n\n    \n    \n      <Button\n        className={`${btnStyles.Button} ${btnStyles.Blue}`}\n        onClick={() => history.goBack()}\n      >\n        cancel\n      </Button>\n      <Button className={`${btnStyles.Button} ${btnStyles.Blue}`} type=\"submit\">\n        save\n      </Button>\n    </div>\n  );\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Row className=\"mt-4\">\n        <Col>\n        <Form.Group controlId=\"privacy\" className={`${appStyles.Content} text-center`}>\n            <Form.Check \n            type=\"switch\"\n            id=\"privacy\"\n            name=\"privacy\"\n            label=\"Private Post ?\"\n            checked={privacy}\n            value={privacy}\n            onChange={handleChange} />\n            </Form.Group>\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"py-2 p-0 p-md-2\" md={7} lg={8}>\n          <Container\n            className={`${appStyles.Content} ${styles.Container} d-flex flex-column justify-content-center`}\n          >\n            <Form.Group className=\"text-center\">\n                \n                        <figure>\n                            <Image className={appStyles.Image} src={image} rounded/>\n                        </figure>\n                        <div>\n                            <Form.Label className={`${btnStyles.Button} ${btnStyles.Blue} btn`} htmlFor=\"image-upload\">\n                                Change the image\n                            </Form.Label>\n                        </div>\n                    \n                {/* Image upload '/*' so that only images are accepted */}\n                <Form.File\n                    id=\"image-upload\" accept=\"image/*\"\n                    onChange={handleChangeImage} \n                    ref={imageInput} />\n            </Form.Group>\n            {errors.image?.map((message, idx)=>(\n                <Alert variant=\"warning\" key={idx}>{message}</Alert>\n            ))}\n\n            <div className=\"d-md-none\">{textFields}</div>\n          </Container>\n        </Col>\n        <Col md={5} lg={4} className=\"d-none d-md-block p-0 p-md-2\">\n          <Container className={appStyles.Content}>{textFields}</Container>\n        </Col>\n      </Row>\n    </Form>\n  );\n}\n\n\nexport default PostEditForm;","import React, { useEffect, useState } from \"react\";\n\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Container from \"react-bootstrap/Container\";\n\nimport Asset from \"../../components/Asset\";\n\nimport styles from \"../../styles/ProfilePage.module.css\";\nimport appStyles from \"../../App.module.css\";\nimport btnStyles from \"../../styles/Button.module.css\";\n\nimport PopularProfiles from \"./PopularProfiles\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\nimport { useParams } from \"react-router\";\nimport { axiosReq } from \"../../api/axiosDefaults\";\nimport {\n  useProfileData,\n  useSetProfileData,\n} from \"../../contexts/ProfileDataContext\";\nimport { Button, Image } from \"react-bootstrap\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport Post from \"../posts/Post\";\nimport { fetchMoreData } from \"../../utils/utils\";\nimport NoResults from \"../../assets/no-results.png\";\nimport { ProfileEditDropdown } from \"../../components/MoreDropdown\";\n\nfunction ProfilePage() {\n  const [hasLoaded, setHasLoaded] = useState(false);\n  const [profilePosts, setProfilePosts] = useState({ results: [] });\n\n  const currentUser = useCurrentUser();\n  const { id } = useParams();\n\n  // const setProfileData = useSetProfileData();\n  const { pageProfile } = useProfileData();\n  console.log(pageProfile)\n  const [profile] = pageProfile.results;\n  const is_owner = currentUser?.username === profile?.owner;\n  const {setProfileData, handleFollow, handleUnfollow} = useSetProfileData();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [{ data: pageProfile }, { data: profilePosts }] =\n          await Promise.all([\n            axiosReq.get(`/profiles/${id}/`),\n            axiosReq.get(`/products/posts/?vote__owner__profile=&owner__profile=${id}`),\n          ]);\n        setProfileData((prevState) => ({\n          ...prevState,\n          pageProfile: { results: [pageProfile] },\n        }));\n        setProfilePosts(profilePosts);\n        setHasLoaded(true);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, [id, setProfileData]);\n  const fetchDataRequest = async () => {\n    try {\n      const [{ data: pageProfile }, { data: profilePosts }] =\n        await Promise.all([\n          axiosReq.get(`/profiles/${id}/`),\n          axiosReq.get(`/products/posts/?vote__owner__profile=&owner__profile=${id}`),\n        ]);\n      setProfileData((prevState) => ({\n        ...prevState,\n        pageProfile: { results: [pageProfile] },\n      }));\n      setProfilePosts(profilePosts);\n      setHasLoaded(true);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const handleAddFriendClick = () => {\n    handleFollow(profile);\n    fetchDataRequest();\n  }\n  const handleRemoveFriendClick = () => {\n    handleUnfollow(profile);\n    fetchDataRequest();\n  }\n  const mainProfile = (\n    <>\n    {profile?.is_owner && <ProfileEditDropdown id={profile?.id} />}\n      <Row noGutters className=\"px-3 text-center\">\n        <Col lg={3} className=\"text-lg-left\">\n          <Image\n            className={styles.ProfileImage}\n            roundedCircle\n            src={profile?.image}\n          />\n        </Col>\n        <Col lg={6}>\n          <h3 className=\"m-2 text-lg-center\">{profile?.owner}</h3>\n          <Row className=\"justify-content-center no-gutters\">\n            <Col xs={3} className=\"my-2\">\n              <div>{profile?.posts_count}</div>\n              <div>posts</div>\n            </Col>\n            <Col xs={3} className=\"my-2\">\n            <div>{!profile?.total_up_votes_received ? (0):(profile?.total_up_votes_received)}</div>\n              <div>Up votes</div> \n            </Col>\n            <Col xs={4} className=\"my-2\">\n              <div>{!profile?.total_down_votes_received ? (0):(profile?.total_down_votes_received)}</div>\n              <div>Down Votes</div>\n            </Col>\n          </Row>\n        </Col>\n        {/* <Col lg={3} className=\"text-lg-right\"></Col> */}\n        <Col lg={3} className=\"text-lg-right\">\n          {currentUser &&\n            !is_owner &&\n            (profile?.sender_id ? (\n              <Button\n                className={`${btnStyles.Button} ${btnStyles.BlackOutline}`}\n                onClick={()=>handleRemoveFriendClick()}\n              >\n                Remove Friend\n              </Button>\n            ) : (\n              <Button\n                className={`${btnStyles.Button} ${btnStyles.Black}`}\n                onClick={()=>handleAddFriendClick()}\n              >\n                Add Friend\n              </Button>\n            ))}\n        </Col>\n        {profile?.content && <Col className=\"p-3\">{profile.content}</Col>}\n      </Row>\n    </>\n  );\n\n  const mainProfilePosts = (\n    <>\n      <hr />\n      <p className=\"text-center\">{profile?.owner}'s posts</p>\n      <hr />\n      {profilePosts.results.length ? (\n        <InfiniteScroll\n          children={profilePosts.results.map((post) => (\n            <Post key={post.id} {...post} setPosts={setProfilePosts} />\n          ))}\n          dataLength={profilePosts.results.length}\n          loader={<Asset spinner />}\n          hasMore={!!profilePosts.next}\n          next={() => fetchMoreData(profilePosts, setProfilePosts)}\n        />\n      ) : (\n        <Asset\n          src={NoResults}\n          message={`No results found, ${profile?.owner} hasn't posted yet.`}\n        />\n      )}\n    </>\n  );\n\n  return (\n    <Row>\n      <Col className=\"py-2 p-0 p-lg-2\" lg={8}>\n        <PopularProfiles mobile />\n        <Container className={appStyles.Content}>\n          {hasLoaded ? (\n            <>\n              {mainProfile}\n              {mainProfilePosts}\n            </>\n          ) : (\n            <Asset spinner />\n          )}\n        </Container>\n      </Col>\n      <Col lg={4} className=\"d-none d-lg-block p-0 p-lg-2\">\n        <PopularProfiles />\n      </Col>\n    </Row>\n  );\n}\n\nexport default ProfilePage;","import React, { useEffect, useState } from \"react\";\n\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Form from \"react-bootstrap/Form\";\nimport Row from \"react-bootstrap/Row\";\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { axiosRes } from \"../../api/axiosDefaults\";\nimport {\n  useCurrentUser,\n  useSetCurrentUser,\n} from \"../../contexts/CurrentUserContext\";\n\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\n\nconst UsernameForm = () => {\n  const [username, setUsername] = useState(\"\");\n  const [errors, setErrors] = useState({});\n\n  const history = useHistory();\n  const { id } = useParams();\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useSetCurrentUser();\n\n  useEffect(() => {\n    if (currentUser?.profile_id?.toString() === id) {\n      setUsername(currentUser.username);\n    } else {\n      history.push(\"/\");\n    }\n  }, [currentUser, history, id]);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      await axiosRes.put(\"/dj-rest-auth/user/\", {\n        username,\n      });\n      setCurrentUser((prevUser) => ({\n        ...prevUser,\n        username,\n      }));\n      history.goBack();\n    } catch (err) {\n      console.log(err);\n      setErrors(err.response?.data);\n    }\n  };\n\n  return (\n    <Row>\n      <Col className=\"py-2 mx-auto text-center\" md={6}>\n        <Container className={appStyles.Content}>\n          <Form onSubmit={handleSubmit} className=\"my-2\">\n            <Form.Group>\n              <Form.Label>Change username</Form.Label>\n              <Form.Control\n                placeholder=\"username\"\n                type=\"text\"\n                value={username}\n                onChange={(event) => setUsername(event.target.value)}\n              />\n            </Form.Group>\n            {errors?.username?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n            <Button\n              className={`${btnStyles.Button} ${btnStyles.Blue}`}\n              onClick={() => history.goBack()}\n            >\n              cancel\n            </Button>\n            <Button\n              className={`${btnStyles.Button} ${btnStyles.Blue}`}\n              type=\"submit\"\n            >\n              save\n            </Button>\n          </Form>\n        </Container>\n      </Col>\n    </Row>\n  );\n};\n\nexport default UsernameForm;","import React, { useEffect, useState } from \"react\";\n\nimport Alert from \"react-bootstrap/Alert\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Form from \"react-bootstrap/Form\";\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { axiosRes } from \"../../api/axiosDefaults\";\nimport { useCurrentUser } from \"../../contexts/CurrentUserContext\";\n\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\n\nconst UserPasswordForm = () => {\n  const history = useHistory();\n  const { id } = useParams();\n  const currentUser = useCurrentUser();\n\n  const [userData, setUserData] = useState({\n    new_password1: \"\",\n    new_password2: \"\",\n  });\n  const { new_password1, new_password2 } = userData;\n\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (event) => {\n    setUserData({\n      ...userData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  useEffect(() => {\n    if (currentUser?.profile_id?.toString() !== id) {\n      // redirect user if they are not the owner of this profile\n      history.push(\"/\");\n    }\n  }, [currentUser, history, id]);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      await axiosRes.post(\"/dj-rest-auth/password/change/\", userData);\n      history.goBack();\n    } catch (err) {\n      console.log(err);\n      setErrors(err.response?.data);\n    }\n  };\n\n  return (\n    <Row>\n      <Col className=\"py-2 mx-auto text-center\" md={6}>\n        <Container className={appStyles.Content}>\n          <Form onSubmit={handleSubmit}>\n            <Form.Group>\n              <Form.Label>New password</Form.Label>\n              <Form.Control\n                placeholder=\"new password\"\n                type=\"password\"\n                value={new_password1}\n                onChange={handleChange}\n                name=\"new_password1\"\n              />\n            </Form.Group>\n            {errors?.new_password1?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n            <Form.Group>\n              <Form.Label>Confirm password</Form.Label>\n              <Form.Control\n                placeholder=\"confirm new password\"\n                type=\"password\"\n                value={new_password2}\n                onChange={handleChange}\n                name=\"new_password2\"\n              />\n            </Form.Group>\n            {errors?.new_password2?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n            <Button\n              className={`${btnStyles.Button} ${btnStyles.Blue}`}\n              onClick={() => history.goBack()}\n            >\n              cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              className={`${btnStyles.Button} ${btnStyles.Blue}`}\n            >\n              save\n            </Button>\n          </Form>\n        </Container>\n      </Col>\n    </Row>\n  );\n};\n\nexport default UserPasswordForm;","import React, { useState, useEffect, useRef } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Image from \"react-bootstrap/Image\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Container from \"react-bootstrap/Container\";\nimport Alert from \"react-bootstrap/Alert\";\n\nimport { axiosReq } from \"../../api/axiosDefaults\";\nimport {\n  useCurrentUser,\n  useSetCurrentUser,\n} from \"../../contexts/CurrentUserContext\";\n\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\n\nconst ProfileEditForm = () => {\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useSetCurrentUser();\n  const { id } = useParams();\n  const history = useHistory();\n  const imageFile = useRef();\n\n  const [profileData, setProfileData] = useState({\n    name: \"\",\n    content: \"\",\n    image: \"\",\n  });\n  const { name, content, image } = profileData;\n\n  const [errors, setErrors] = useState({});\n\n  useEffect(() => {\n    const handleMount = async () => {\n      if (currentUser?.profile_id?.toString() === id) {\n        try {\n          const { data } = await axiosReq.get(`/profiles/${id}/`);\n          const { name, content, image } = data;\n          setProfileData({ name, content, image });\n        } catch (err) {\n          console.log(err);\n          history.push(\"/\");\n        }\n      } else {\n        history.push(\"/\");\n      }\n    };\n\n    handleMount();\n  }, [currentUser, history, id]);\n\n  const handleChange = (event) => {\n    setProfileData({\n      ...profileData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"content\", content);\n\n    if (imageFile?.current?.files[0]) {\n      formData.append(\"image\", imageFile?.current?.files[0]);\n    }\n\n    try {\n      const { data } = await axiosReq.put(`/profiles/${id}/`, formData);\n      setCurrentUser((currentUser) => ({\n        ...currentUser,\n        profile_image: data.image,\n      }));\n      history.goBack();\n    } catch (err) {\n      console.log(err);\n      setErrors(err.response?.data);\n    }\n  };\n\n  const textFields = (\n    <>\n      <Form.Group>\n        <Form.Label>Bio</Form.Label>\n        <Form.Control\n          as=\"textarea\"\n          value={content}\n          onChange={handleChange}\n          name=\"content\"\n          rows={7}\n        />\n      </Form.Group>\n\n      {errors?.content?.map((message, idx) => (\n        <Alert variant=\"warning\" key={idx}>\n          {message}\n        </Alert>\n      ))}\n      <Button\n        className={`${btnStyles.Button} ${btnStyles.Blue}`}\n        onClick={() => history.goBack()}\n      >\n        cancel\n      </Button>\n      <Button className={`${btnStyles.Button} ${btnStyles.Blue}`} type=\"submit\">\n        save\n      </Button>\n    </>\n  );\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Row>\n        <Col className=\"py-2 p-0 p-md-2 text-center\" md={7} lg={6}>\n          <Container className={appStyles.Content}>\n            <Form.Group>\n              {image && (\n                <figure>\n                  <Image src={image} fluid />\n                </figure>\n              )}\n              {errors?.image?.map((message, idx) => (\n                <Alert variant=\"warning\" key={idx}>\n                  {message}\n                </Alert>\n              ))}\n              <div>\n                <Form.Label\n                  className={`${btnStyles.Button} ${btnStyles.Blue} btn my-auto`}\n                  htmlFor=\"image-upload\"\n                >\n                  Change the image\n                </Form.Label>\n              </div>\n              <Form.File\n                id=\"image-upload\"\n                ref={imageFile}\n                accept=\"image/*\"\n                onChange={(e) => {\n                  if (e.target.files.length) {\n                    setProfileData({\n                      ...profileData,\n                      image: URL.createObjectURL(e.target.files[0]),\n                    });\n                  }\n                }}\n              />\n            </Form.Group>\n            <div className=\"d-md-none\">{textFields}</div>\n          </Container>\n        </Col>\n        <Col md={5} lg={6} className=\"d-none d-md-block p-0 p-md-2 text-center\">\n          <Container className={appStyles.Content}>{textFields}</Container>\n        </Col>\n      </Row>\n    </Form>\n  );\n};\n\nexport default ProfileEditForm;","import Container from 'react-bootstrap/esm/Container';\nimport styles from './App.module.css';\nimport NavBar from './components/NavBar';\nimport {Route, Switch} from 'react-router-dom'\nimport NotFound from './components/NotFound';\nimport SignUpForm from './pages/auth/SignUpForm';\nimport SignInForm from './pages/auth/SignIn';\nimport PostCreateForm from './pages/posts/PostCreateForm';\nimport PostPage from './pages/posts/PostPage';\nimport PostsPage from './pages/posts/PostsPage';\nimport { useCurrentUser } from './contexts/CurrentUserContext';\nimport PostEditForm from './pages/posts/PostEditForm';\nimport ProfilePage from './pages/profiles/ProfilePage';\nimport UsernameForm from \"./pages/profiles/UsernameForm\";\nimport UserPasswordForm from \"./pages/profiles/UserPasswordForm\";\nimport ProfileEditForm from \"./pages/profiles/ProfileEditForm\";\n\nfunction App() {\n  const currentUser = useCurrentUser();\n  const profile_id = currentUser?.profile_id || \"\";\n  return (\n    <div className={styles.App}>\n      <NavBar />\n      <Container className={styles.Main}>\n        <Switch>\n        <Route exact path='/' render={() => <PostsPage message=\"No results found. Ajdust the search keyword.\" />} />\n          <Route exact path='/trending' render={() => <PostsPage message=\"No results found. Ajdust the search keyword or follow a user.\" filter={'&ordering=-up_votes_count&'}/>} />\n          <Route exact path='/voted' render={() => <PostsPage message=\"No results found. Ajdust the search keyword or vote on a post.\" filter={`vote__owner__profile=${profile_id}&ordering=-likes__created_at&`} />} />\n          <Route exact path='/signin' render={() => <SignInForm/> }></Route>\n          <Route exact path='/signup' render={() => <SignUpForm /> }></Route>\n          <Route exact path='/posts/create' render={() => <PostCreateForm />}></Route>\n          <Route exact path='/products/posts/:id' render={() => <PostPage />}></Route>\n          <Route exact path='/products/posts/:id/edit' render={()=> <PostEditForm />}></Route>\n          <Route exact path='/profiles/:id' render= {() => <ProfilePage />}></Route>\n          <Route exact path=\"/profiles/:id/edit/username\" render={() => <UsernameForm />}/>\n          <Route exact path=\"/profiles/:id/edit/password\" render={() => <UserPasswordForm />}/>\n          <Route exact path=\"/profiles/:id/edit\" render={() => <ProfileEditForm />}/>\n          <Route render={() => <NotFound />}/>\n        </Switch>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport { CurrentUserProvider } from './contexts/CurrentUserContext';\nimport { ProfileDataProvider } from \"./contexts/ProfileDataContext\";\n\nReactDOM.render(\n  \n    <Router>\n      <CurrentUserProvider>\n        <ProfileDataProvider>\n          <App />\n        </ProfileDataProvider>\n      </CurrentUserProvider>\n    </Router>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavBar\":\"NavBar_NavBar__1amC6\",\"NavLink\":\"NavBar_NavLink__34ons\",\"Active\":\"NavBar_Active__3PBZb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Row\":\"SignInUpForm_Row__3PbVy\",\"Input\":\"SignInUpForm_Input__3xaLZ\",\"Header\":\"SignInUpForm_Header__3joQJ\",\"Link\":\"SignInUpForm_Link__1BeMm\",\"Container\":\"SignInUpForm_Container__2cuBp\",\"SignInCol\":\"SignInUpForm_SignInCol__3ImPK\",\"SignUpCol\":\"SignInUpForm_SignUpCol__28o4y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Post\":\"Post_Post__3UScv\",\"Heart\":\"Post_Heart__3zMAO\",\"HeartOutline\":\"Post_HeartOutline__2dqsh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Form\":\"CommentCreateEditForm_Form__1Qeyz\",\"Button\":\"CommentCreateEditForm_Button__sGFSX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"PostCreateEditForm_Container__2WHuV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DropdownItem\":\"MoreDropdown_DropdownItem__2E4UM\",\"Absolute\":\"MoreDropdown_Absolute__2RO70\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"RuleList\":\"Modal_RuleList__1HKF8\",\"RuleItem\":\"Modal_RuleItem__SaSSb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Owner\":\"Comment_Owner__3sgYe\",\"Date\":\"Comment_Date__10qt0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchBar\":\"PostsPage_SearchBar__1T8bC\",\"SearchIcon\":\"PostsPage_SearchIcon__12ojn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__27i9m\",\"Wide\":\"Button_Wide__2ScDr\",\"Blue\":\"Button_Blue__10GcT\",\"BlueOutline\":\"Button_BlueOutline__YqCWO\",\"Bright\":\"Button_Bright__1MBHR\",\"Black\":\"Button_Black__2dCp7\",\"BlackOutline\":\"Button_BlackOutline__I-kZ-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Avatar\":\"Avatar_Avatar__196lW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NotFound\":\"NotFound_NotFound__AmwKj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Asset\":\"Asset_Asset__1dBcX\"};"],"sourceRoot":""}